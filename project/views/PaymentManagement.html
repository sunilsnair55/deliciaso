<!DOCTYPE html>
<html lang="en" ng-app="myApp"ng-controller="myCtrl" ng-init="init()">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <!-- Meta, title, CSS, favicons, etc. -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Deliciaso | </title>

  <!-- Bootstrap core CSS -->

  <link href="css/bootstrap.min.css" rel="stylesheet">

  <link href="fonts/css/font-awesome.min.css" rel="stylesheet">
  <link href="css/animate.min.css" rel="stylesheet">

  <!-- Custom styling plus plugins -->
  <link rel="stylesheet" href="angular/angular-material.css">
  <link href="css/custom.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="css/maps/jquery-jvectormap-2.0.3.css" />
  <link href="css/icheck/flat/green.css" rel="stylesheet" />
  <link href="css/floatexamples.css" rel="stylesheet" type="text/css" />

  <link rel="stylesheet" type="text/css" href="angular-ui-grid/ui-grid.min.css"></script>


<script src="js/jquery.min.js"></script>
<script src="angular/angular.min.js"></script>
<script src="angular/angular-animate.js"></script>
<script src="angular/angular-aria.js"></script>
<script src="angular/angular-material.js"></script>
<script src="angular-ui-grid/ui-grid.min.js"></script>







  <script src="js/nprogress.js"></script>
  <script src="js/validator/validator.js"></script>
<style>
.grid {
  width: 1000px;
  height: 250px;
}
</style>

</head>


<body class="nav-md">

  <div class="container body">


    <div class="main_container">

      <div class="col-md-3 left_col">
        <div class="left_col scroll-view">

          <div class="navbar nav_title" style="border: 0;">
            <a href="/order" class="site_title" style="height:106px;padding-left:0px;"><img src="images/deliciaso_logo.png" style="height:86px;width:134px;" class="img-circle profile_img"></a>
          </div>
          <div class="clearfix"></div>

          <!-- menu prile quick info -->
          <div class="profile" style="margin-top:50px;">
            <div class="profile_pic">
              <img src="images/avatar.ico" alt="..." class="img-circle profile_img">
            </div>
            <div class="profile_info">
              <span>Welcome,</span>
              <h2>Admin</h2>
            </div>
          </div>
          <!-- /menu prile quick info -->

          <br />

          <!-- sidebar menu -->
          <div id="sidebar-menu" class="main_menu_side hidden-print main_menu" >

            <div class="menu_section">
              <h3>&nbsp;</h3>
              <ul class="nav side-menu">
                <li><a><i class="fa fa-home"></i> Home <span class="fa fa-chevron-down"></span></a>
                  <ul class="nav child_menu" style="display: none">
                    <li><a href="/order">New Order</a>
                    </li>
                    <li><a href="/payment">Payments</a>
                    </li>
                    <li><a href="/customers">Customers</a>
                    </li>
                  </ul>
                </li>

              </ul>
            </div>
          </div>
          <!-- /sidebar menu -->

          <!-- /menu footer buttons -->
          <div class="sidebar-footer hidden-small">
            <a data-toggle="tooltip" data-placement="top" title="Settings">
              <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
            </a>
            <a data-toggle="tooltip" data-placement="top" title="FullScreen">
              <span class="glyphicon glyphicon-fullscreen" aria-hidden="true"></span>
            </a>
            <a data-toggle="tooltip" data-placement="top" title="Lock">
              <span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span>
            </a>
            <a data-toggle="tooltip" data-placement="top" title="Logout">
              <span class="glyphicon glyphicon-off" aria-hidden="true"></span>
            </a>
          </div>
          <!-- /menu footer buttons -->
        </div>
      </div>

      <!-- top navigation -->
      <div class="top_nav">

        <div class="nav_menu">
          <nav class="" role="navigation">
            <div class="nav toggle">
              <a id="menu_toggle"><i class="fa fa-bars"></i></a>
            </div>

            <ul class="nav navbar-nav navbar-right">
              <li class="">
                <a href="javascript:;" class="user-profile dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                  <img src="images/avatar.ico" alt="">Admin
                  <span class=" fa fa-angle-down"></span>
                </a>
                <ul class="dropdown-menu dropdown-usermenu animated fadeInDown pull-right">
                  <li><a href="javascript:;">  Profile</a>
                  </li>
                  <li><a href="/"><i class="fa fa-sign-out pull-right"></i> Log Out</a>
                  </li>
                </ul>
              </li>
            </ul>
          </nav>
        </div>

      </div>
      <!-- /top navigation -->


      <!-- page content -->
      <div class="right_col" role="main" style="height:900px !important;">

        <!-- top tiles -->
        <div class="row tile_count">
          <div class="animated flipInY col-md-2 col-sm-4 col-xs-4 tile_stats_count">
            <div class="left"></div>
            <div class="right">
              <span class="count_top"><i class="fa fa-user"></i> Total Customers</span>
              <div class="count">0</div>
            </div>
          </div>
          <div class="animated flipInY col-md-2 col-sm-4 col-xs-4 tile_stats_count">
            <div class="left"></div>
            <div class="right">
              <span class="count_top"><i class="fa fa-clock-o"></i>Total Cakes Sold</span>
              <div class="count">0</div>
            </div>
          </div>
          <div class="animated flipInY col-md-2 col-sm-4 col-xs-4 tile_stats_count">
            <div class="left"></div>
            <div class="right">
              <span class="count_top"><i class="fa fa-user"></i> Completed Payments</span>
              <div class="count green">0</div>
            </div>
          </div>
          <div class="animated flipInY col-md-2 col-sm-4 col-xs-4 tile_stats_count">
            <div class="left"></div>
            <div class="right">
              <span class="count_top"><i class="fa fa-user"></i> Due Payments</span>
              <div class="count">0</div>
            </div>
          </div>
          <div class="animated flipInY col-md-2 col-sm-4 col-xs-4 tile_stats_count">
            <div class="left"></div>
            <div class="right">
              <span class="count_top"><i class="fa fa-user"></i> Total Collections</span>
              <div class="count">0</div>
            </div>
          </div>
          <div class="animated flipInY col-md-2 col-sm-4 col-xs-4 tile_stats_count">
            <div class="left"></div>
            <div class="right">
              <span class="count_top"><i class="fa fa-user"></i> Today`s Collection</span>
              <div class="count">0</div>
            </div>
          </div>

        </div>
        <!-- /top tiles -->
        <br /><br />

        <div class="col-md-12 col-sm-12 col-xs-12">
          <div class="x_panel">
            <div class="x_title">
              <h2><i class="fa fa-bars"></i>Payments</h2>
              <div class="clearfix"></div>
            </div>
            <div class="x_content">


              <div class="" role="tabpanel" data-example-id="togglable-tabs">
                <ul id="myTab" class="nav nav-tabs bar_tabs" role="tablist">
                  <li role="presentation" class="active"><a href="#tab_content1" id="home-tab" role="tab" data-toggle="tab" aria-expanded="true">Pending Payments</a>
                  </li>
                  <li role="presentation" class=""><a href="#tab_content2" role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false">Partial Payments</a>
                  </li>
                  <li role="presentation" class=""><a href="#tab_content3" role="tab" id="profile-tab2" data-toggle="tab" aria-expanded="false">Completed Payments</a>
                  </li>

                </ul>
                <div id="myTabContent" class="tab-content">
                  <div role="tabpanel" class="tab-pane fade active in" id="tab_content1" aria-labelledby="home-tab">

                    <div class="alert alert-success"  id="PendingPaymentSuccess" style="display:none;text-align:center;">
                    <strong id="PendingPaymentSuccessMessage"></strong>
                    </div>


                    <div class="row" id="NewOrder" >

                      <div class="col-md-12 col-sm-12 col-xs-12">
                        <div class="x_panel">
                          <div class="x_title">
                            <div class="clearfix"></div>
                          </div>
                          <div class="x_content">
                            <div class="row">
                              <div class="col-md-12">
                              <div  ui-grid="ShowPendingPayment" ui-grid-pinning ui-grid-pagination  class="grid" ui-grid-resize-columns ui-grid-move-columns ></div>
                                <br><br><br>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                    </div>





                  </div>
                  <div role="tabpanel" class="tab-pane fade" id="tab_content2" aria-labelledby="profile-tab">
                    <div class="alert alert-success"  id="PartialPaymentSuccess" style="display:none;text-align:center;">
                    <strong id="PartialPaymentSuccessMessage"></strong>
                    </div>
                    <div class="row" id="NewOrder" >

                      <div class="col-md-12 col-sm-12 col-xs-12">
                        <div class="x_panel">
                          <div class="x_title">
                            <div class="clearfix"></div>
                          </div>
                          <div class="x_content">
                            <div class="row">
                              <div class="col-md-12">
                              <div  ui-grid="ShowPartialPayment" ui-grid-pinning ui-grid-pagination  class="grid" ui-grid-resize-columns ui-grid-move-columns ></div>
                                <br><br><br>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                    </div>


                  </div>
                  <div role="tabpanel" class="tab-pane fade" id="tab_content3" aria-labelledby="profile-tab">
                    <div class="row" id="NewOrder" >

                      <div class="col-md-12 col-sm-12 col-xs-12">
                        <div class="x_panel">
                          <div class="x_title">
                            <div class="clearfix"></div>
                          </div>
                          <div class="x_content">
                            <div class="row">
                              <div class="col-md-12">
                              <div  ui-grid="ShowCompletedPayment" ui-grid-pinning ui-grid-pagination  class="grid" ui-grid-resize-columns ui-grid-move-columns ></div>
                                <br><br><br>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                    </div>
                  </div>

                </div>
              </div>

            </div>
          </div>
        </div>




      </div>
      <!-- /page content -->

    </div>

  </div>

  <div id="custom_notifications" class="custom-notifications dsp_none">
    <ul class="list-unstyled notifications clearfix" data-tabbed_notifications="notif-group">
    </ul>
    <div class="clearfix"></div>
    <div id="notif-group" class="tabbed_notifications"></div>
  </div>

  <script src="js/bootstrap.min.js"></script>
  <script src="js/nicescroll/jquery.nicescroll.min.js"></script>
  <script src="js/custom.js"></script>
    <script type="text/javascript" src="js/wizard/jquery.smartWizard.js"></script>


  <!-- pace -->
  <script src="js/pace/pace.min.js"></script>

  <script>

  var app = angular.module('myApp', ['ui.grid','ui.grid.pinning','ui.grid.pagination','ui.grid.resizeColumns']);

  app.controller('myCtrl', function($scope,$http,$timeout, $q, $log) {


  $scope.GetPaymentdata = function(){
    $http.get('/GetOrderData/api').success(function(response){
      console.log(response);
     $scope.PendingPayment = response.Pending;
     $scope.PartialPayment = response.Partial;
     $scope.CompletedPayment = response.Completed;

    });
  };

      $scope.GetPaymentdata();


    $scope.ShowPendingPayment = {
        data: 'PendingPayment',
        paginationPageSizes: [25, 50, 75],
        paginationPageSize: 25,
        useExternalPagination: true,
         enableColumnResizing: true,
         enableFiltering: true,
        columnDefs: [{field:'Name', displayName:'Name',width:100},
    {field:'Mobile', displayName:'Mobile',width:100},
    {field:'Email', displayName:'Email',width:100},
    {field:'CakeName', displayName:'Cake Flavour',width:100},
    {field:'DeliveryType', displayName:'Delivery Type',width:100},
    {field:'Amount', displayName:'Amount',width:100},
    {field:'CakeOrderId', cellTemplate: '<button class="btn btn-success" ng-click="grid.appScope.PaymentModal(row)">Payment</button>',displayName:'Make Payment',width:120,enableFiltering: false,enableCellEdit:false},
  {field:'CakeOrderId', cellTemplate: '<button class="btn btn-primary" ng-click="grid.appScope.OrderDetailsModal(row)">Order Details</button>',displayName:'View',width:120,enableFiltering: false,enableCellEdit:false}]

  };

  $scope.ShowPartialPayment = {
      data: 'PartialPayment',
      paginationPageSizes: [25, 50, 75],
      paginationPageSize: 25,
      useExternalPagination: true,
       enableColumnResizing: true,
       enableFiltering: true,
      columnDefs: [{field:'Name', displayName:'Name',width:100},
  {field:'Mobile', displayName:'Mobile',width:100},
  {field:'Email', displayName:'Email',width:100},
  {field:'CakeName', displayName:'Cake Flavour',width:100},
  {field:'DeliveryType', displayName:'Delivery Type',width:100},
  {field:'Amount', displayName:'Amount',width:100},
  {field:'PaidAmount', displayName:'Paid Amount',width:100},
  {field:'BalanceAmount', displayName:'Due Amount',width:100},
{field:'CakeOrderId', cellTemplate: '<button class="btn btn-success" ng-click="grid.appScope.PartialPaymentModal(row)">Payment</button>',displayName:'Make Payment',width:120,enableFiltering: false,enableCellEdit:false},
{field:'CakeOrderId', cellTemplate: '<button class="btn btn-primary" ng-click="grid.appScope.PartialDetailsModal(row)" >Order Details</button>',displayName:'View',width:130,enableFiltering: false,enableCellEdit:false}]
};

$scope.ShowCompletedPayment = {
    data: 'CompletedPayment',
    paginationPageSizes: [25, 50, 75],
    paginationPageSize: 25,
    useExternalPagination: true,
     enableColumnResizing: true,
     enableFiltering: true,
    columnDefs: [{field:'Name', displayName:'Name',width:100},
{field:'Mobile', displayName:'Mobile',width:100},
{field:'Email', displayName:'Email',width:100},
{field:'CakeName', displayName:'Cake Flavour',width:100},
{field:'DeliveryType', displayName:'Delivery Type',width:100},
{field:'Amount', displayName:'Amount',width:100},
{field:'PaidAmount', displayName:'Paid Amount',width:100},
{field:'Discount', displayName:'Discount',width:100},
{field:'CakeOrderId', cellTemplate: '<button class="btn btn-primary" ng-click="grid.appScope.CompletedDetailsModal(row)" >Order Details</button>',displayName:'View',width:130,enableFiltering: false,enableCellEdit:false}]
};

  $scope.GetPaymentType= function()
  {
    var val= $scope.Payment.PaymentType;
    if(val == "0"){
      $scope.ecm =false;
      $scope.pos = false;
    }
    else if (val == "1") {
      $scope.ecm =true;
      $scope.pos = false;

    }
    else if (val=="2") {
      $scope.ecm =false;
      $scope.pos = true;
    }
  };
  $scope.GetPartialPaymentType = function(){
    var val= $scope.PartialMakePayment.PaymentType;
    if(val == "0"){
      $scope.Partialecm =false;
      $scope.Partialpos = false;
    }
    else if (val == "1") {
      $scope.Partialecm =true;
      $scope.Partialpos = false;

    }
    else if (val=="2") {
      $scope.Partialecm =false;
      $scope.Partialpos = true;
    }
  };

  $scope.SetPaymentStatus = function(){
    if((parseInt($scope.Payment.PaidAmount) == parseInt($scope.Payment.Amount)) || (parseInt($scope.Payment.PaidAmount) > parseInt($scope.Payment.Amount)))
    {
      $scope.Payment.PaymentStatus = "2";
    }
  else if (parseInt($scope.Payment.PaidAmount) < parseInt($scope.Payment.Amount)) {
    $scope.Payment.PaymentStatus = "1";
  }
  else {
    return;
  }

  };
  $scope.SetPartialPaymentStatus = function(){

    $scope.PartialMakePayment.Discount="";
    if((parseInt($scope.PartialMakePayment.BalanceAmount) == parseInt($scope.PartialMakePayment.DueAmount)) || (parseInt($scope.PartialMakePayment.DueAmount) > parseInt($scope.PartialMakePayment.BalanceAmount)))
    {
      $scope.PartialMakePayment.PaymentStatus = "2";
    }
  else if (parseInt($scope.PartialMakePayment.DueAmount) < parseInt($scope.PartialMakePayment.BalanceAmount)) {
    $scope.PartialMakePayment.PaymentStatus = "1";
  }
  else {
    return;
  }

  };

  $scope.SetDiscount = function(){
      $scope.discount=false;
    console.log($scope.Payment.PaymentStatus);
    if($scope.Payment.PaymentStatus == "2")
    {console.log("inside");
      if (parseInt($scope.Payment.PaidAmount) < parseInt($scope.Payment.Amount))
      {
        $scope.discount=true;
        $scope.Payment.Discount = parseInt($scope.Payment.Amount)-parseInt($scope.Payment.PaidAmount);
      }
    }
  };

  $scope.SetPartialDiscount = function(){
    $scope.Partialdiscount=false;
    if($scope.PartialMakePayment.PaymentStatus == "2")
    {
      if (parseInt($scope.PartialMakePayment.DueAmount) < parseInt($scope.PartialMakePayment.BalanceAmount))
      {
        $scope.Partialdiscount=true;
        $scope.PartialMakePayment.Discount = parseInt($scope.PartialMakePayment.BalanceAmount)-parseInt($scope.PartialMakePayment.DueAmount);
      }
    }
  };

  $scope.PaymentModal = function(row){
    console.log(row);
    $scope.Payment = row.entity;
    $scope.Payment.PaymentStatus = "2";
    $('#ModalPayment').modal('show');
  };

  $scope.PartialPaymentModal = function(row)
  {
    console.log(row.entity);

    $scope.PartialMakePayment = row.entity;
    $scope.PartialMakePayment.DueAmount = $scope.PartialMakePayment.BalanceAmount;
    $scope.PartialMakePayment.PaymentStatus = "2";
    $scope.PartialMakePayment.PaymentType = "0";
    $('#ModalPartialPayment').modal('show');
  };


  $scope.OrderDetailsModal = function(row)
  {
    $scope.Details="";
    $scope.Details = row.entity;
    $('#ModalOrderDetails').modal('show');
  };
  $scope.PartialDetailsModal = function(row)
  {
    $scope.PartialDetails ="";
    $scope.PartialDetails = row.entity;
    $('#ModalPartialOrderDetails').modal('show');
  };
  $scope.CompletedDetailsModal = function(row)
  {
    $scope.CompletedDetails = "";
    $scope.CompletedDetails = row.entity;
    $('#ModalCompletedOrderDetails').modal('show');
  };


  $scope.MakePayment = function()
  {
    $('#PendingPaymentError').html('');
    if($scope.Payment!=undefined)
    {
      $http.post('/ValidatePendingPayment',$scope.Payment).success(function(response){
        console.log(response);
        if(response)
        {
          $('#PendingPaymentValidation').show(1000).delay(2000).hide(1000);;
          $('#PendingPaymentError').html(response[0].msg);
        }
        else
        {
          $scope.Payment.BalanceAmount = parseInt($scope.Payment.Amount)-parseInt($scope.Payment.PaidAmount);

          var Data = {'CakeOrderId':$scope.Payment.CakeOrderId,'PaidAmount':$scope.Payment.PaidAmount,
        'PaymentType':$scope.Payment.PaymentType,'NeftTxnNo':$scope.Payment.NeftTxnNo,'CardTxnNo':$scope.Payment.CardTxnNo,'PaymentStatus':$scope.Payment.PaymentStatus,
        'Discount':$scope.Payment.Discount,'BalanceAmount':$scope.Payment.BalanceAmount};

          $http.post('/MakePayment',Data).success(function(data){
            console.log(data);
            if(data!="" && data!=null)
            {
              $('#ModalPayment').modal('hide');
              $scope.Payment="";
              $scope.GetPaymentdata();
              $('#PendingPaymentSuccess').show(1000).delay(2000).hide(1000);;
              $('#PendingPaymentSuccessMessage').html("Payment Updated Successfully.");
            }
          });
        }

      });

    }
    else {

      $('#PendingPaymentValidation').show(1000).delay(2000).hide(1000);;
      $('#PendingPaymentError').html("Payment data is not defined.");
    }

  };

  $scope.MakePartialPayment = function()
  {
    if($scope.PartialMakePayment!=undefined)
    {
      $http.post('/ValidatePartialPayment',$scope.PartialMakePayment).success(function(response){
        if(response)
        {
          $('#PartialPaymentValidation').show(1000).delay(2000).hide(1000);;
          $('#PartialPaymentError').html(response[0].msg);
          // alert(response[0].msg);
        }
        else {

           $scope.PartialMakePayment.FinalBalanceAmount = parseInt($scope.PartialMakePayment.BalanceAmount)-parseInt($scope.PartialMakePayment.DueAmount);
          $scope.PartialMakePayment.TotalPaid = parseInt($scope.PartialMakePayment.PaidAmount)+parseInt($scope.PartialMakePayment.DueAmount);

          var Data = {'CakeOrderId':$scope.PartialMakePayment.CakeOrderId,'PaidAmount':$scope.PartialMakePayment.TotalPaid,
        'PaymentType':$scope.PartialMakePayment.PaymentType,'NeftTxnNo':$scope.PartialMakePayment.NeftTxnNo,'CardTxnNo':$scope.PartialMakePayment.CardTxnNo,'PaymentStatus':$scope.PartialMakePayment.PaymentStatus,
        'Discount':$scope.PartialMakePayment.Discount,'BalanceAmount':$scope.PartialMakePayment.FinalBalanceAmount};
console.log(Data);
                    $http.post('/MakePayment',Data).success(function(data){
                    console.log(data);
                    if(data!="" && data!=null)
                    {
                    $('#ModalPartialPayment').modal('hide');
                    $scope.Payment="";
                    $scope.GetPaymentdata();
                    $('#PartialPaymentSuccess').show(1000).delay(2000).hide(1000);;
                    $('#PartialPaymentSuccessMessage').html("Payment Updated Successfully.");

                    }
                    });
        }

      });
    }
    else {
      alert("Payment data is not defined.");
    }

  };





  });
</script>



</body>
<div class="modal fade" id="ModalPayment" role="dialog" style="display:none;top:50px;">
    <div class="modal-dialog" style="width: 40%;">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Make Payment</h4>
        </div>
        <div class="modal-body">
          <form class="form-horizontal form-label-left" style="min-height: 300px;">

                                  <div class="alert alert-danger"  id="PendingPaymentValidation" style="display:none;text-align:center;">
                                  <strong id="PendingPaymentError"></strong>
                                  </div>

                <div class="form-group">
                  <label class="control-label col-md-3 " for="last-name">Order Id
                  </label>
                  <div class="col-md-6">
                    <input type="text" id="mobile" name="last-name" disabled class="form-control col-md-7 col-xs-12" ng-model="Payment.CakeOrderId">
                  </div>
                </div>

                <div class="form-group">
                  <label for="middle-name" class="control-label col-md-3 col-sm-3 col-xs-12">Amount Payable</label>
                  <div class="col-md-6">
                    <input id="middle-name" class="form-control col-md-7 col-xs-12" type="text" disabled name="middle-name" ng-model="Payment.Amount">
                  </div>
                </div>

                <div class="form-group">
                  <label class="control-label col-md-3 col-sm-3 col-xs-12">Payment Type</label>
                  <div class="col-md-6">
                    <div class="btn-group" data-toggle="buttons">
                      <label><input type="radio" name="test" ng-model="Payment.PaymentType" value="0"ng-click="GetPaymentType()"/> Cash</label>
                      <label><input type="radio" name="test" ng-model="Payment.PaymentType" value="1" ng-click="GetPaymentType()"/> NEFT</label>
                      <label><input type="radio" name="test" ng-model="Payment.PaymentType" value="2" ng-click="GetPaymentType()"/> Card</label>
                    </div>
                  </div>
                </div>

                <div class="form-group" ng-show="ecm">
                  <label for="middle-name" class="control-label col-md-3 col-sm-3 col-xs-12">NEFT Txn Number</label>
                  <div class="col-md-6">
                    <input  class="form-control col-md-7 col-xs-12" type="text" placeholder="optional.." ng-model="Payment.NeftTxnNo">
                  </div>
                </div>

                <div class="form-group" ng-show="pos">
                  <label for="middle-name" class="control-label col-md-3 col-sm-3 col-xs-12">Card Txn Number</label>
                  <div class="col-md-6">
                    <input  class="form-control col-md-7 col-xs-12" type="text" placeholder="optional.." ng-model="Payment.CardTxnNo">
                  </div>
                </div>


                <div class="form-group">
                  <label for="middle-name" class="control-label col-md-3 col-sm-3 col-xs-12">Amount Paid</label>
                  <div class="col-md-6">
                    <input id="middle-name" class="form-control col-md-7 col-xs-12" type="text" name="middle-name" ng-model="Payment.PaidAmount" ng-keyup="SetPaymentStatus()">
                  </div>
                </div>



                <div class="form-group">
                  <label class="control-label col-md-3 col-sm-3 col-xs-12">Payment Status</label>
                  <div class="col-md-6">
                    <select class="select2_single form-control" tabindex="-1" ng-model="Payment.PaymentStatus" ng-click="SetDiscount()">
                                              <option value="0">Pending</option>
                                              <option value="1">Partial</option>
                                              <option value="2" >Completed</option>
                    </select>
                  </div>
                </div>

                <div class="form-group" ng-show="discount">
                  <label for="middle-name" class="control-label col-md-3 col-sm-3 col-xs-12">Discount (Rs.)</label>
                  <div class="col-md-6">
                    <input id="middle-name" class="form-control col-md-7 col-xs-12" type="text" name="middle-name" ng-model="Payment.Discount">
                  </div>
                </div>

          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" style="float:left;">Close</button>
          <button type="button" class="btn btn-success" style="float:right;" ng-click="MakePayment()">Make Payment</button>
        </div>
      </div>

    </div>
  </div>



  <div class="modal fade" id="ModalPartialPayment" role="dialog" style="display:none;top:50px;">
      <div class="modal-dialog" style="width: 40%;">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Make Payment</h4>
          </div>
          <div class="modal-body">
            <form class="form-horizontal form-label-left" style="min-height: 300px;">

                                    <div class="alert alert-danger"  id="PartialPaymentValidation" style="display:none;text-align:center;">
                                    <strong id="PartialPaymentError"></strong>
                                    </div>

                  <div class="form-group">
                    <label class="control-label col-md-4 " for="last-name">Order Id
                    </label>
                    <div class="col-md-6">
                      <input type="text" id="mobile" name="last-name" disabled class="form-control col-md-7 col-xs-12" ng-model="PartialMakePayment.CakeOrderId">
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="middle-name" class="control-label col-md-4 col-sm-4 col-xs-12">Total Amount Payable </label>
                    <div class="col-md-6">
                      <input id="middle-name" class="form-control col-md-7 col-xs-12" type="text" name="middle-name" disabled ng-model="PartialMakePayment.Amount">
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="middle-name" class="control-label col-md-4 col-sm-4 col-xs-12">Paid Amount</label>
                    <div class="col-md-6">
                      <input id="middle-name" class="form-control col-md-7 col-xs-12" type="text" name="middle-name" disabled ng-model="PartialMakePayment.PaidAmount" >
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="middle-name" class="control-label col-md-4 col-sm-4 col-xs-12">Due Amount </label>
                    <div class="col-md-6">
                      <input id="middle-name" class="form-control col-md-7 col-xs-12" type="text"  name="middle-name"   ng-model="PartialMakePayment.DueAmount" ng-keyup="SetPartialPaymentStatus()">
                    </div>
                  </div>

                  <!-- <div class="form-group">
                    <label for="middle-name" class="control-label col-md-4 col-sm-4 col-xs-12">Pay</label>
                    <div class="col-md-6">
                      <input id="middle-name" class="form-control col-md-7 col-xs-12" type="text" disabled name="middle-name"   ng-model="PartialPayment.pay">
                    </div>
                  </div> -->



                  <div class="form-group">
                    <label class="control-label col-md-4 col-sm-4 col-xs-12">Payment Type</label>
                    <div class="col-md-6">
                      <div class="btn-group" data-toggle="buttons">
                        <label><input type="radio" name="test" ng-model="PartialMakePayment.PaymentType" value="0"ng-click="GetPartialPaymentType()"/> Cash</label>
                        <label><input type="radio" name="test" ng-model="PartialMakePayment.PaymentType" value="1" ng-click="GetPartialPaymentType()"/> NEFT</label>
                        <label><input type="radio" name="test" ng-model="PartialMakePayment.PaymentType" value="2" ng-click="GetPartialPaymentType()"/> Card</label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group" ng-show="Partialecm">
                    <label for="middle-name" class="control-label col-md-4 col-sm-4 col-xs-12">NEFT Txn Number</label>
                    <div class="col-md-6">
                      <input  class="form-control col-md-7 col-xs-12" type="text" placeholder="optional.." ng-model="PartialMakePayment.NeftTxnNo">
                    </div>
                  </div>

                  <div class="form-group" ng-show="Partialpos">
                    <label for="middle-name" class="control-label col-md-4 col-sm-4 col-xs-12">Card Txn Number</label>
                    <div class="col-md-6">
                      <input  class="form-control col-md-7 col-xs-12" type="text" placeholder="optional.." ng-model="PartialMakePayment.CardTxnNo">
                    </div>
                  </div>



                  <div class="form-group">
                    <label class="control-label col-md-4 col-sm-4 col-xs-12">Payment Status</label>
                    <div class="col-md-6">
                      <select class="select2_single form-control" tabindex="-1" ng-model="PartialMakePayment.PaymentStatus" ng-click="SetPartialDiscount()">
                                                <option value="0">Pending</option>
                                                <option value="1">Partial</option>
                                                <option value="2" >Completed</option>
                      </select>
                    </div>
                  </div>

                  <div class="form-group" ng-show="Partialdiscount">
                    <label for="middle-name" class="control-label col-md-4 col-sm-4 col-xs-12">Discount </label>
                    <div class="col-md-6">
                      <input id="middle-name" class="form-control col-md-7 col-xs-12" type="text" name="middle-name" ng-model="PartialMakePayment.Discount">
                    </div>
                  </div>

            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal" style="float:left;">Close</button>
            <button type="button" class="btn btn-success" style="float:right;" ng-click="MakePartialPayment()">Make Payment</button>
          </div>
        </div>

      </div>
    </div>



  <div class="modal fade" id="ModalOrderDetails" role="dialog" style="display:none;top:30px;">
      <div class="modal-dialog" style="width: 60%;">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Order Details</h4>
          </div>
          <div class="modal-body">
            <form class="form-horizontal form-label-left" style="min-height: 300px;">
              <div class="container">

                <div class="row">
                  <div class="col-md-12">
                    <h2 style="text-align:center;">Customer Details</h2>
                  </div>
                </div>
              <div class="row">
                <div class="col-md-3">
                  <label for="middle-name" class="control-label" style="text-align:left;">Customer Name</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label"style="text-align:left;">{{Details.Name}}</label>
                </div>
                <div class="col-md-3">
                  <label for="middle-name" class="control-label"style="text-align:left;">Mobile</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label"style="text-align:left;">{{Details.Mobile}}</label>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3">
                  <label for="middle-name" class="control-label"style="text-align:left;">Email</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label"style="text-align:left;">{{Details.Email}}</label>
                </div>
                <div class="col-md-3">
                  <label for="middle-name" class="control-label"style="text-align:left;">Gender</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label"style="text-align:left;">{{Details.Gender}}</label>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">Address</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">{{Details.Address}}</label>
                </div>
                <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">Zip</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">{{Details.Zip}}</label>
                </div>
              </div>
              <br>
              <div class="row">
                <div class="col-md-12">
                  <h2 style="text-align:center;">Order Details</h2>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">Flavour Name</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">{{Details.CakeName}}</label>
                </div>
                <div class="col-md-3">
                  <label for="middle-name" class="control-label"style="text-align:left;">Size</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">{{Details.Size}}</label>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3">
                  <label for="middle-name" class="control-label"style="text-align:left;">Shape</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">{{Details.Shape}}</label>
                </div>
                <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">Type</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">{{Details.Type}}</label>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">Occasion</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">{{Details.Occasion}}</label>
                </div>
                <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">Message On Cake</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">{{Details.Message}}</label>
                </div>
              </div>

              <div class="row">
                <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">Amount</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">{{Details.Amount}}</label>
                </div>

              </div>

              <br>
              <div class="row">
                <div class="col-md-12">
                  <h2 style="text-align:center;">Delivery Details</h2>
                </div>
              </div>

              <div class="row">
                <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">Delivery Type</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">{{Details.DeliveryType}}</label>
                </div>
                <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">Delivery Date</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">{{Details.DeliveryDate}}</label>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">Pick Up Date</label>
                </div>
                    <div class="col-md-3">
                  <label for="middle-name" class="control-label "style="text-align:left;">{{Details.PickUpDate}}</label>
                </div>

              </div>

            </div>

            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal" style="float:left;">Close</button>
          </div>
        </div>

      </div>
    </div>



    <div class="modal fade" id="ModalPartialOrderDetails" role="dialog" style="display:none;top:30px;">
        <div class="modal-dialog" style="width: 60%;">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">Order Details</h4>
            </div>
            <div class="modal-body">
              <form class="form-horizontal form-label-left" style="min-height: 300px;">
                <div class="container">

                  <div class="row">
                    <div class="col-md-12">
                      <h2 style="text-align:center;">Customer Details</h2>
                    </div>
                  </div>
                <div class="row">
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label" style="text-align:left;">Customer Name</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label"style="text-align:left;">{{PartialDetails.Name}}</label>
                  </div>
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label"style="text-align:left;">Mobile</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label"style="text-align:left;">{{PartialDetails.Mobile}}</label>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label"style="text-align:left;">Email</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label"style="text-align:left;">{{PartialDetails.Email}}</label>
                  </div>
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label"style="text-align:left;">Gender</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label"style="text-align:left;">{{PartialDetails.Gender}}</label>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">Address</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">{{PartialDetails.Address}}</label>
                  </div>
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">Zip</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">{{PartialDetails.Zip}}</label>
                  </div>
                </div>
                <br>
                <div class="row">
                  <div class="col-md-12">
                    <h2 style="text-align:center;">Order Details</h2>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">Flavour Name</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">{{PartialDetails.CakeName}}</label>
                  </div>
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label"style="text-align:left;">Size</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">{{PartialDetails.Size}}</label>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label"style="text-align:left;">Shape</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">{{PartialDetails.Shape}}</label>
                  </div>
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">Type</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">{{PartialDetails.Type}}</label>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">Occasion</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">{{PartialDetails.Occasion}}</label>
                  </div>
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">Message On Cake</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">{{PartialDetails.Message}}</label>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">Amount</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">{{PartialDetails.Amount}}</label>
                  </div>

                </div>

                <br>
                <div class="row">
                  <div class="col-md-12">
                    <h2 style="text-align:center;">Delivery Details</h2>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">Delivery Type</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">{{PartialDetails.DeliveryType}}</label>
                  </div>
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">Delivery Date</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">{{PartialDetails.DeliveryDate}}</label>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">Pick Up Date</label>
                  </div>
                      <div class="col-md-3">
                    <label for="middle-name" class="control-label "style="text-align:left;">{{PartialDetails.PickUpDate}}</label>
                  </div>

                </div>

              </div>

              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal" style="float:left;">Close</button>
            </div>
          </div>

        </div>
      </div>

      <div class="modal fade" id="ModalCompletedOrderDetails" role="dialog" style="display:none;top:30px;">
          <div class="modal-dialog" style="width: 60%;">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Order Details</h4>
              </div>
              <div class="modal-body">
                <form class="form-horizontal form-label-left" style="min-height: 300px;">
                  <div class="container">

                    <div class="row">
                      <div class="col-md-12">
                        <h2 style="text-align:center;">Customer Details</h2>
                      </div>
                    </div>
                  <div class="row">
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label" style="text-align:left;">Customer Name</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label"style="text-align:left;">{{CompletedDetails.Name}}</label>
                    </div>
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label"style="text-align:left;">Mobile</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label"style="text-align:left;">{{CompletedDetails.Mobile}}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label"style="text-align:left;">Email</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label"style="text-align:left;">{{CompletedDetails.Email}}</label>
                    </div>
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label"style="text-align:left;">Gender</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label"style="text-align:left;">{{CompletedDetails.Gender}}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">Address</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">{{CompletedDetails.Address}}</label>
                    </div>
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">Zip</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">{{CompletedDetails.Zip}}</label>
                    </div>
                  </div>
                  <br>
                  <div class="row">
                    <div class="col-md-12">
                      <h2 style="text-align:center;">Order Details</h2>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">Flavour Name</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">{{CompletedDetails.CakeName}}</label>
                    </div>
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label"style="text-align:left;">Size</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">{{CompletedDetails.Size}}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label"style="text-align:left;">Shape</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">{{CompletedDetails.Shape}}</label>
                    </div>
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">Type</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">{{CompletedDetails.Type}}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">Occasion</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">{{CompletedDetails.Occasion}}</label>
                    </div>
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">Message On Cake</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">{{CompletedDetails.Message}}</label>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">Amount</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">{{CompletedDetails.Amount}}</label>
                    </div>

                  </div>

                  <br>
                  <div class="row">
                    <div class="col-md-12">
                      <h2 style="text-align:center;">Delivery Details</h2>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">Delivery Type</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">{{CompletedDetails.DeliveryType}}</label>
                    </div>
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">Delivery Date</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">{{CompletedDetails.DeliveryDate}}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">Pick Up Date</label>
                    </div>
                        <div class="col-md-3">
                      <label for="middle-name" class="control-label "style="text-align:left;">{{CompletedDetails.PickUpDate}}</label>
                    </div>

                  </div>

                </div>

                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" style="float:left;">Close</button>
              </div>
            </div>

          </div>
        </div>





</html>
